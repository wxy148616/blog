<!DOCTYPE html>
<html lang="default">
  <head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="google-site-verification" content="nt7ofDlUEAj-G2sNFlh0wBJYoWH1hdvum_-V5zOgHzg">
<meta name="baidu-site-verification" content="XG5Sc98jMI">
<meta name="wlhlauth" content="8d884ffcaa79c5165f113cd2349b52d7">
<meta name="360-site-verification" content="577ecf1c5f95d421bb0482d93c7faa1e">

<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="复习MySQL--约束"><meta name="keywords" content="Python,建站,数据处理,LeetCode"><link rel="alternate" href="/atom.xml" title="时光博客"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0">
<link rel="canonical" href="https://www.wxy.email/2020/07/26/mysql-yx/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":"","toc":true,"fancybox":true,"pjax":true,"latex":false};
</script>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2911390145109533",
    enable_page_level_ads: true
  });
</script>

<script>
  // 搜索框
    function search(){
        $.ajax({
            url:'../../search.xml',
            type: 'GET',
            dataType: 'xml',
            timeout: 5000,
            cache:false,
            error: function(xml){
                console.log('加载XML文档出错');
            },
            success: function(xml){
                //建立一个代码片段
                var root_xml=xml.documentElement;
                var data=$('#search').val();
                var entry=root_xml.getElementsByTagName("entry");
                var frag=$("<ul/>");
                for (var i = 0; i <= entry.length - 1; i++) {
                    var content = entry[i];
                    if (content.textContent.search(data) != -1) {
                        frag.append("<a style='color:blanchedalmond; text-decoration: underline;' href='http://www.wxy.email"+content.getElementsByTagName('url')[0].textContent
                            + "'><b>" + content.getElementsByTagName('title')[0].textContent + "</b></a><br>");
                    }
                }
                //最后得到的frag添加进HTML文档中
                $('#DisplayBox').empty();
                Display();
                frag.appendTo("#DisplayBox");
                // alert(frag)
            }
        });
    }
    function RealTimeSearch(){
    // 事实监控input内容的变动，触发搜索
        var input = document.getElementById('search').value;
        if (input === "") {
            $('#DisplayBox').empty();
            return
        }
        search();
    }
    function disblock(){
    // 关闭搜索框
        document.getElementById('pop_up').style.display='none';
    }
    function dis_search() {
    // 按键触发关闭搜索框
        let event = window.event;
        // console.log(event.keyCode);
        // alert(event.KeyCode);
        if (event.keyCode === 27) {
            console.log(event.keyCode);
            disblock();
        }
    }
    function enter_search() {
    // 按键触发搜索
        let event = window.event;
        // console.log(event.keyCode);
        // alert(event.KeyCode);
        if (event.keyCode === 13) {
            console.log(event.keyCode);
            search();
        }
    }
    function Display(){
        setTimeout(() => {
            document.getElementById('pop_up').style.width = document.body.clientWidth + 'px';
            document.getElementById('pop_up').style.height = $(window).height() + 'px';
            document.getElementById('pop_up').style.display='block';
            document.getElementById('mobile-panel').style.transform='none';
            document.getElementById('mobile-navbar').className = 'mobile-navbar';
            // event.stopPropagation();
        },1);
    }
    function TriggerSearch(){
      Display();
    }
</script>
    <title>MySQL约束的概念及使用 - 时光博客</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">时光博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><li class="mobile-menu-item"><a href="/">
                        首页
                        </a>
                      </li>
        <li class="mobile-menu-item"><a href="/archives/">
                        归档
                        </a>
                      </li>
        <li class="mobile-menu-item"><a href="/tags/">
                        标签
                        </a>
                      </li>
        <li class="mobile-menu-item"><a href="/categories/">
                        分类
                        </a>
                      </li>
        <li class="mobile-menu-item"><span></span>
        </li></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">时光博客</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
            <a class="menu-item-link" href="/">
                      首页
                      </a>
                  </li>
                <li class="menu-item">
            <a class="menu-item-link" href="/archives/">
                      归档
                      </a>
                  </li>
                <li class="menu-item">
            <a class="menu-item-link" href="/tags/">
                      标签
                      </a>
                  </li>
                <li class="menu-item">
            <a class="menu-item-link" href="/categories/">
                      分类
                      </a>
                  </li>
                <li class="menu-item">
            <span></span>
                </li></ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">MySQL约束的概念及使用
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-07-26
        </span><span class="post-category">
            <a href="/categories/MySQL/">MySQL</a>
            </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-主键约束"><span class="toc-text">1. 主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-主键约束的概念"><span class="toc-text">1.1. 主键约束的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-主键约束的使用"><span class="toc-text">1.2.主键约束的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-设置单字段主键"><span class="toc-text">1.2.1. 设置单字段主键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-设置联合主键"><span class="toc-text">1.2.2. 设置联合主键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-在修改表时添加主键约束"><span class="toc-text">1.2.3. 在修改表时添加主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-删除主键约束"><span class="toc-text">1.2.4. 删除主键约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-主键的自增长"><span class="toc-text">1.3. 主键的自增长</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-指定自增字段初始值"><span class="toc-text">1.3.1. 指定自增字段初始值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-指定自增字段初始值"><span class="toc-text">1.3.2. 指定自增字段初始值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-外键约束"><span class="toc-text">2. 外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-外键约束的概念"><span class="toc-text">2.1. 外键约束的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-外键约束的使用"><span class="toc-text">2.2.外键约束的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-创建表时设置外键约束"><span class="toc-text">2.2.1. 创建表时设置外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-删除外键约束"><span class="toc-text">2.2.2. 删除外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-修改表时设置外键约束"><span class="toc-text">2.2.3. 修改表时设置外键约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-唯一约束"><span class="toc-text">3. 唯一约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-唯一约束的概念"><span class="toc-text">3.1. 唯一约束的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-唯一约束的使用"><span class="toc-text">3.2.唯一约束的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-创建表时设置唯一约束"><span class="toc-text">3.2.1. 创建表时设置唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-删除唯一约束"><span class="toc-text">3.2.2. 删除唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-修改表时设置唯一约束"><span class="toc-text">3.2.3. 修改表时设置唯一约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-检查约束"><span class="toc-text">4. 检查约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-检查约束的概念"><span class="toc-text">4.1. 检查约束的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-检查约束的使用"><span class="toc-text">4.2.检查约束的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-创建表时设置检查约束"><span class="toc-text">4.2.1. 创建表时设置检查约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-删除检查约束"><span class="toc-text">4.2.2. 删除检查约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-修改表时设置检查约束"><span class="toc-text">4.2.3. 修改表时设置检查约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-非空约束"><span class="toc-text">5. 非空约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-非空约束的概念"><span class="toc-text">5.1. 非空约束的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-非空约束的使用"><span class="toc-text">5.2.非空约束的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-创建表时设置非空约束"><span class="toc-text">5.2.1. 创建表时设置非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-删除非空约束"><span class="toc-text">5.2.2. 删除非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-3-修改表时设置非空约束"><span class="toc-text">5.2.3. 修改表时设置非空约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-默认值约束"><span class="toc-text">6. 默认值约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-默认值约束的概念"><span class="toc-text">6.1. 默认值约束的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-默认值约束的使用"><span class="toc-text">6.2.默认值约束的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-创建表时设置默认值约束"><span class="toc-text">6.2.1. 创建表时设置默认值约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-删除默认值约束"><span class="toc-text">6.2.2. 删除默认值约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3-修改表时设置默认值约束"><span class="toc-text">6.2.3. 修改表时设置默认值约束</span></a></li></ol></li></ol></li></ol>
    </div>
  </div><div class="post-content"><p>约束，就是字面意思，指对表中数据的一种约束，能够确保数据的正确性和有效性。<br>在MySQL中，主要有六种约束：主键约束、外键约束、唯一约束、检查约束、非空约束、默认值约束。</p>
<h1 id="1-主键约束"><a href="#1-主键约束" class="headerlink" title="1. 主键约束"></a><b>1. 主键约束</b></h1><h2 id="1-1-主键约束的概念"><a href="#1-1-主键约束的概念" class="headerlink" title="1.1. 主键约束的概念"></a><b>1.1. 主键约束的概念</b></h2><p>主键是表的一个特殊字段，该字段能唯一标识该表中的每条信息，主键分为单字段主键和多字段联合主键。<br>一般情况下，都会要求表中设置一个主键。比如，人员信息表中的身份证号是唯一的，可以设置为主键。</p>
<ul>
<li>主键的限制：<ol>
<li>每个表只能定义一个主键</li>
<li>主键值必须唯一标识表中的每一行，且不能为NULL，遵循唯一性原则</li>
<li>一个字段名只能在联合主键字段表中出现一次</li>
<li>联合主键不能包含不必要的多余字段。即把联合主键的某一字段删除后如果剩下的字段构成的主键仍然满足唯一性原则，那么这个联合主键是不正确的。这是最小化原则。</li>
</ol>
</li>
</ul>
<h2 id="1-2-主键约束的使用"><a href="#1-2-主键约束的使用" class="headerlink" title="1.2.主键约束的使用"></a>1.2.<b>主键约束的使用</b></h2><h3 id="1-2-1-设置单字段主键"><a href="#1-2-1-设置单字段主键" class="headerlink" title="1.2.1. 设置单字段主键"></a>1.2.1. 设置单字段主键</h3><ul>
<li><code>字段名 数据类型  primary key 默认值</code></li>
<li>例，创建<code>t1</code>表，字段<code>id</code>设置为主键</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1 (id int(11) primary key, name varchar(32), phone char(11));</span><br><span class="line">Query OK, 0 rows affected (0.19 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(32) | YES  |     | NULL    |       |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>也可以先定时字段后指定主键，例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1 (id int(11), name varchar(32), phone char(11), primary key (id));</span><br><span class="line">Query OK, 0 rows affected (0.18 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(32) | YES  |     | NULL    |       |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-2-2-设置联合主键"><a href="#1-2-2-设置联合主键" class="headerlink" title="1.2.2. 设置联合主键"></a>1.2.2. 设置联合主键</h3><ul>
<li><code>primary key (字段名1, 字段名2, ……)</code></li>
<li>例，创建数据表t1，把id、name联合起来作为主键。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1 (id int(11), name varchar(32), phone char(11), primary key (id, name));</span><br><span class="line">Query OK, 0 rows affected (0.18 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(32) | NO   | PRI | NULL    |       |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="1-2-3-在修改表时添加主键约束"><a href="#1-2-3-在修改表时添加主键约束" class="headerlink" title="1.2.3. 在修改表时添加主键约束"></a>1.2.3. 在修改表时添加主键约束</h3><ul>
<li>主键也可以在修改表时添加，但是设置成主键约束的字段不允许有空值。</li>
<li><code>alter table 数据表名 add primary key(字段名);</code></li>
<li>例，修改没有主键的t1表，把字段id设置为主键。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(32) | YES  |     | NULL    |       |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">alter</span> <span class="keyword">table</span> t1 <span class="keyword">add</span> primary <span class="keyword">key</span>(<span class="keyword">id</span>);</span><br><span class="line">Query OK, 0 rows affected (0.12 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(32) | YES  |     | NULL    |       |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="1-2-4-删除主键约束"><a href="#1-2-4-删除主键约束" class="headerlink" title="1.2.4. 删除主键约束"></a>1.2.4. 删除主键约束</h3><ul>
<li><code>alter table 数据表名 drop primary key;</code></li>
<li>例，删除t1表的主键约束。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t1 <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br></pre></td></tr></table></figure>
<h2 id="1-3-主键的自增长"><a href="#1-3-主键的自增长" class="headerlink" title="1.3. 主键的自增长"></a><b>1.3. 主键的自增长</b></h2><h3 id="1-3-1-指定自增字段初始值"><a href="#1-3-1-指定自增字段初始值" class="headerlink" title="1.3.1. 指定自增字段初始值"></a>1.3.1. 指定自增字段初始值</h3><p>通过给字段添加<code>auto_increment</code>属性实现主键自增长。</p>
<ul>
<li>默认情况下，<code>auto_increment</code>的初始值是1，每新增一条记录，字段值自动加1。</li>
<li>一个表中只能有一个字段使用<code>auto_increment</code>约束，且该字段必须有唯一索引，以避免序号重复。</li>
<li><code>auto_increment</code>约束的字段必须具备<code>not null</code>属性。</li>
<li><code>auto_increment</code>约束的字段只能是整数类型。</li>
<li><code>auto_increment</code>约束字段的最大值受该字段的数据类型约束。</li>
<li>例，创建数据表<code>t1</code>，指定表中id字段为主键，且自增长。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1(id int(11) primary key auto_increment, name varchar(32), phone char(11));</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br></pre></td></tr></table></figure>
<h3 id="1-3-2-指定自增字段初始值"><a href="#1-3-2-指定自增字段初始值" class="headerlink" title="1.3.2. 指定自增字段初始值"></a>1.3.2. 指定自增字段初始值</h3><ul>
<li>例，创建数据表<code>t1</code>，指定表中id字段为主键，从100开始自增长。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1(id int not null auto_increment, name varchar(24) not null, primary key(id)) auto_increment=100;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>向t1表插入数据，并查看插入数据的id</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t1(name) values ("张三");</span><br><span class="line">Query OK, 1 row affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t1;</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| id  | name   |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">| 100 | 张三   |</span><br><span class="line">+<span class="comment">-----+--------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="2-外键约束"><a href="#2-外键约束" class="headerlink" title="2. 外键约束"></a><b>2. 外键约束</b></h1><h2 id="2-1-外键约束的概念"><a href="#2-1-外键约束的概念" class="headerlink" title="2.1. 外键约束的概念"></a><b>2.1. 外键约束的概念</b></h2><p>外键约束是表的一个特殊字段，经常与主键约束一起使用。两个具有关联关系的表，关联字段中主键所在的表是主表（父表），外键所在的表是从表（子表）。<br>外键用来建立主表与从表的关联关系，为两个表的数据建立连接，约束两个表中数据的一致性和完整性。</p>
<ul>
<li>外键的限制：<ol>
<li>主表必须已经存在或者是当前正在创建的表，如果主表是正在创建的表，则主表与从表是同一表，这样的表称为自参照表，这种结构称为自参照完整性。</li>
<li>关联的主表必须拥有主键。</li>
<li>主键不能存在空值，但是允许在外键中出现空值。（只要外键的每个非空值出现在指定的主键中，这个外键的内容就是对的）<sup>注：没搞懂这一句啥意思</sup>。</li>
<li>在主表的表名后面指定的列名或者列名的组合。这个列或者列的组合必须是主表的主键或候选键。</li>
<li>外键中列的数目必须和主表的主键中列的数目相同。</li>
<li>外键中列的数据类型必须和主表主键中对应列的数据类型相同。</li>
<li>主表删除某条记录时，从表与之对应的记录也必须有相应的改变。</li>
<li>一个表可以有一个或多个外键，外键可以为空值，若不为空值，则每一个外键的值必须等于主表中主键的某个值。</li>
</ol>
</li>
</ul>
<h2 id="2-2-外键约束的使用"><a href="#2-2-外键约束的使用" class="headerlink" title="2.2.外键约束的使用"></a>2.2.<b>外键约束的使用</b></h2><h3 id="2-2-1-创建表时设置外键约束"><a href="#2-2-1-创建表时设置外键约束" class="headerlink" title="2.2.1. 创建表时设置外键约束"></a>2.2.1. 创建表时设置外键约束</h3><ul>
<li>通过<code>foreign key</code>关键字指定外键</li>
<li>例，已有主键为<code>id</code>的<code>t1</code>表，然后创建<code>t2</code>表并创建外键约束，把字段<code>t1_id</code>作为外键关联到<code>t1</code>表的主键<code>id</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(24) | NO   |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">table</span> t2(<span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) primary <span class="keyword">key</span>, t1_id <span class="built_in">int</span>(<span class="number">11</span>), phone <span class="built_in">varchar</span>(<span class="number">11</span>), <span class="keyword">constraint</span> fk_t1 <span class="keyword">foreign</span> <span class="keyword">key</span>(t1_id) <span class="keyword">references</span> t1(<span class="keyword">id</span>));</span><br><span class="line">Query OK, 0 rows affected (0.17 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t2;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| t1_id | int(11)     | YES  | MUL | NULL    |       |</span><br><span class="line">| phone | varchar(11) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-删除外键约束"><a href="#2-2-2-删除外键约束" class="headerlink" title="2.2.2. 删除外键约束"></a>2.2.2. 删除外键约束</h3><ul>
<li><code>alter table 表名 drop foreign key 外键约束名;</code></li>
<li>例，删除<code>t2</code>表的外键约束<code>fk_t1</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t2 drop foreign key fk_t1;</span><br><span class="line">Query OK, 0 rows affected (0.19 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t2 \G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: t2</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t2`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`t1_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`fk_t1`</span> (<span class="string">`t1_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>重新查看t2的生成语句，<code>foreign key</code>已经被删除。</li>
</ul>
<h3 id="2-2-3-修改表时设置外键约束"><a href="#2-2-3-修改表时设置外键约束" class="headerlink" title="2.2.3. 修改表时设置外键约束"></a>2.2.3. 修改表时设置外键约束</h3><ul>
<li>外键约束也可以在修改表时添加，但是添加外键约束的前提是：从表中外键列中的数据必须与主表中主键列中的数据一致或者是没有数据。</li>
<li>例，已有主键为<code>id</code>的<code>t1</code>表，已有<code>t2</code>表，没有设置外键。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(24) | NO   |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> t2 \G</span><br><span class="line">*************************** <span class="number">1.</span> <span class="keyword">row</span> ***************************</span><br><span class="line">       <span class="keyword">Table</span>: t2</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t2`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`t1_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`fk_t1`</span> (<span class="string">`t1_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>设置<code>t2</code>表的键<code>t1_id</code>为外键</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t2 add constraint fk_t1 foreign key(t1_id) references t1(id);</span><br><span class="line">Query OK, 0 rows affected (0.20 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table t2 \G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: t2</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t2`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`t1_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`fk_t1`</span> (<span class="string">`t1_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`fk_t1`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`t1_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`t1`</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>重新查看<code>t2</code>的生成语句，<code>t1_id</code>已经被设置为外键约束。</li>
</ul>
<hr>
<h1 id="3-唯一约束"><a href="#3-唯一约束" class="headerlink" title="3. 唯一约束"></a><b>3. 唯一约束</b></h1><h2 id="3-1-唯一约束的概念"><a href="#3-1-唯一约束的概念" class="headerlink" title="3.1. 唯一约束的概念"></a><b>3.1. 唯一约束的概念</b></h2><p>唯一约束是指所有记录中字段的值不能重复出现。<br>唯一约束与主键约束相似，都可以确保列的唯一性，不同的是，唯一约束在一个表中可有多个，并且设置唯一约束的列允许有空值，但是只能有一个空值。而主键约束在一个表中只能有一列，且不允许有空值。</p>
<h2 id="3-2-唯一约束的使用"><a href="#3-2-唯一约束的使用" class="headerlink" title="3.2.唯一约束的使用"></a>3.2.<b>唯一约束的使用</b></h2><h3 id="3-2-1-创建表时设置唯一约束"><a href="#3-2-1-创建表时设置唯一约束" class="headerlink" title="3.2.1. 创建表时设置唯一约束"></a>3.2.1. 创建表时设置唯一约束</h3><ul>
<li>通过<code>unique</code>关键字指定外键，</li>
<li><code>字段名 数据类型 unique</code>。</li>
<li>例，创建数据表<code>t1</code>，指定<code>name</code>唯一。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1(id int(11) primary key, name varchar(22) unique);</span><br><span class="line">Query OK, 0 rows affected (0.17 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(22) | YES  | UNI | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="3-2-2-删除唯一约束"><a href="#3-2-2-删除唯一约束" class="headerlink" title="3.2.2. 删除唯一约束"></a>3.2.2. 删除唯一约束</h3><ul>
<li><code>alter table 表名 drop index 唯一约束名;</code></li>
<li>例，删除<code>t1</code>表的唯一约束<code>name</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 drop index name;</span><br><span class="line">Query OK, 0 rows affected (0.17 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(22) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>重新查看<code>t1</code>表，唯一约束已经被删除。</li>
</ul>
<h3 id="3-2-3-修改表时设置唯一约束"><a href="#3-2-3-修改表时设置唯一约束" class="headerlink" title="3.2.3. 修改表时设置唯一约束"></a>3.2.3. 修改表时设置唯一约束</h3><ul>
<li><code>alter table 表名 add constraint 唯一约束名 unique(字段名);</code></li>
<li>例，已有主键为<code>id</code>的<code>t1</code>表，已有<code>name</code>字段，没有设置唯一约束。设置<code>name</code>为唯一约束。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 add constraint name unique (name);</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(22) | YES  | UNI | NULL    |       |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="4-检查约束"><a href="#4-检查约束" class="headerlink" title="4. 检查约束"></a><b>4. 检查约束</b></h1><h2 id="4-1-检查约束的概念"><a href="#4-1-检查约束的概念" class="headerlink" title="4.1. 检查约束的概念"></a><b>4.1. 检查约束的概念</b></h2><p>检查约束是用来检查数据表中字段值有效性的一种手段。合理的使用可以减少无效数据的输入。</p>
<blockquote>
<p>检查约束失效问题： 在MySQL 8.0.16之前，检查约束仅允许使用受限版本的CHECK约束语法，该语法将被解析和忽略。</p>
</blockquote>
<h2 id="4-2-检查约束的使用"><a href="#4-2-检查约束的使用" class="headerlink" title="4.2.检查约束的使用"></a>4.2.<b>检查约束的使用</b></h2><h3 id="4-2-1-创建表时设置检查约束"><a href="#4-2-1-创建表时设置检查约束" class="headerlink" title="4.2.1. 创建表时设置检查约束"></a>4.2.1. 创建表时设置检查约束</h3><ul>
<li>检查约束使用<code>check</code>关键字，</li>
<li><code>check 表达式</code>。</li>
<li>例，创建数据表<code>t1</code>，指定<code>age</code>字段大于0且小于150。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1 (id int(11) primary key auto_increment, name varchar(25), age int(11), check(age &gt; 0 and age &lt; 100));</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-2-删除检查约束"><a href="#4-2-2-删除检查约束" class="headerlink" title="4.2.2. 删除检查约束"></a>4.2.2. 删除检查约束</h3><ul>
<li><code>alter table 表名 drop constraint 检查约束名;</code></li>
<li>例，删除<code>t1</code>表的检查约束<code>age</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 drop constraint age;</span><br><span class="line">Query OK, 0 rows affected (0.17 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<h3 id="4-2-3-修改表时设置检查约束"><a href="#4-2-3-修改表时设置检查约束" class="headerlink" title="4.2.3. 修改表时设置检查约束"></a>4.2.3. 修改表时设置检查约束</h3><ul>
<li><code>alter table t1 add constraint 检查约束名 check (检查约束);</code></li>
<li>例，已有<code>t1</code>表，已有<code>age</code>字段，没有设置检查约束。为<code>age</code>设置检查约束。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 add constraint age check (age &gt; 0 and age &lt; 200);</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-非空约束"><a href="#5-非空约束" class="headerlink" title="5. 非空约束"></a><b>5. 非空约束</b></h1><h2 id="5-1-非空约束的概念"><a href="#5-1-非空约束的概念" class="headerlink" title="5.1. 非空约束的概念"></a><b>5.1. 非空约束的概念</b></h2><p>非空约束字段的值不能为空。使用非空约束的字段。在添加数据时必须有指定的值，否则就会报错。</p>
<h2 id="5-2-非空约束的使用"><a href="#5-2-非空约束的使用" class="headerlink" title="5.2.非空约束的使用"></a>5.2.<b>非空约束的使用</b></h2><h3 id="5-2-1-创建表时设置非空约束"><a href="#5-2-1-创建表时设置非空约束" class="headerlink" title="5.2.1. 创建表时设置非空约束"></a>5.2.1. 创建表时设置非空约束</h3><ul>
<li>通过<code>not null</code>关键字设置非空约束，</li>
<li><code>字段名 数据类型 not null;</code>。</li>
<li>例，创建数据表<code>t1</code>，指定<code>name</code>不能为空。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1 (id int(11) primary key auto_increment, name varchar(25) not null, phone char(11));</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(25) | NO   |     | NULL    |                |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="5-2-2-删除非空约束"><a href="#5-2-2-删除非空约束" class="headerlink" title="5.2.2. 删除非空约束"></a>5.2.2. 删除非空约束</h3><ul>
<li><code>alter table 表名 change column 字段名 字段名 数据类型 null;</code></li>
<li>例，删除<code>t1</code>表的<code>name</code>的非空约束。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 change column name name varchar(25) null;</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(25) | YES  |     | NULL    |                |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>重新查看<code>t1</code>表，非空约束已经被删除。</li>
</ul>
<h3 id="5-2-3-修改表时设置非空约束"><a href="#5-2-3-修改表时设置非空约束" class="headerlink" title="5.2.3. 修改表时设置非空约束"></a>5.2.3. 修改表时设置非空约束</h3><ul>
<li><code>alter table 表名 change column 字段名 字段名 数据类型 not null;</code></li>
<li>例，已有<code>t1</code>表，已有<code>name</code>字段，没有设置非空约束。设置<code>name</code>的非空约束。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 change column name name varchar(25) not null;</span><br><span class="line">Query OK, 0 rows affected (0.16 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 00</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(25) | NO   |     | NULL    |                |</span><br><span class="line">| phone | char(11)    | YES  |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="6-默认值约束"><a href="#6-默认值约束" class="headerlink" title="6. 默认值约束"></a><b>6. 默认值约束</b></h1><h2 id="6-1-默认值约束的概念"><a href="#6-1-默认值约束的概念" class="headerlink" title="6.1. 默认值约束的概念"></a><b>6.1. 默认值约束的概念</b></h2><p>默认值约束用来指定某列的默认值，在插入一条数据时，如果没有为某个字段赋值，系统就会自动为这个字段插入默认值。</p>
<h2 id="6-2-默认值约束的使用"><a href="#6-2-默认值约束的使用" class="headerlink" title="6.2.默认值约束的使用"></a>6.2.<b>默认值约束的使用</b></h2><h3 id="6-2-1-创建表时设置默认值约束"><a href="#6-2-1-创建表时设置默认值约束" class="headerlink" title="6.2.1. 创建表时设置默认值约束"></a>6.2.1. 创建表时设置默认值约束</h3><ul>
<li>通过<code>default</code>关键字设置默认值约束，</li>
<li><code>字段名 数据类型 default 默认值;</code>。</li>
<li>例，创建数据表<code>t1</code>，指定<code>name</code>的默认值为<code>张三</code>。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t1 (id int(11) primary key auto_increment, name varchar(25) default '张三', age int(11));</span><br><span class="line">Query OK, 0 rows affected (0.09 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(25) | YES  |     | 张三    |                |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="6-2-2-删除默认值约束"><a href="#6-2-2-删除默认值约束" class="headerlink" title="6.2.2. 删除默认值约束"></a>6.2.2. 删除默认值约束</h3><ul>
<li><code>alter table 表名 change column 字段名 字段名 数据类型 default null;</code></li>
<li>例，删除<code>t1</code>表的<code>name</code>的默认值约束。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 change column name name varchar(25) default null;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(25) | YES  |     | NULL    |                |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>重新查看<code>t1</code>表，默认值约束已经被删除。</li>
</ul>
<h3 id="6-2-3-修改表时设置默认值约束"><a href="#6-2-3-修改表时设置默认值约束" class="headerlink" title="6.2.3. 修改表时设置默认值约束"></a>6.2.3. 修改表时设置默认值约束</h3><ul>
<li><code>alter table 表名 change column 字段名 字段名 数据类型 default 默认值;</code></li>
<li>例，已有<code>t1</code>表，已有<code>name</code>字段，没有设置默认值约束。设置<code>name</code>的默认值。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t1 change column name name varchar(25) default "张三";</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(25) | YES  |     | 张三    |                |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |                |</span><br><span class="line">+<span class="comment">-------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<hr>

      </div>
      
      <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden>
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code"><label class="qr-code-image" for="reward">
          <span>微信</span>
          <img class="image" src="/wx.png" title="wechat">
        </label>
      <label class="qr-code-image" for="reward">
          <img class="image" src="/alp.png" title="alipay">
          <span>支付宝</span>
        </label>
      </div>
  </div><footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/MySQL/">MySQL</a>
            </div>
        
        <nav class="post-nav"><a class="next" href="/2020/07/20/mysql-tables/">
        <span class="next-text nav-default">MySQL数据表操作</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"></div><div class="copyright">
  <span class="power-by">
    联系方式
  </span>
  <span class="division">|</span>
  <span class="theme-info">
  wxy148616@163.com
  </span><span class="copyright-year">
    豫ICP备20019463号&nbsp;&nbsp;&nbsp;&nbsp;&copy;2018 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">时光不写代码</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
<div style="position: fixed; left: 0px; bottom: 10px;"><a href="http://background.wxy.email" rel="external nofollow noopener noreferrer" target="_blank">@Tab页</a></div>
  </body>
</html>
